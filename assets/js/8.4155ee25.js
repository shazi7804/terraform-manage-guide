(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{190:function(t,e,a){"use strict";a.r(e);var r=a(0),i=Object(r.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"前置準備"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置準備","aria-hidden":"true"}},[t._v("#")]),t._v(" 前置準備")]),t._v(" "),a("p",[t._v("Terraform 要佈署 AWS 環境需要準備幾項作業：")]),t._v(" "),a("ol",[a("li",[t._v("State Storage："),a("code",[t._v("S3 bucket")])]),t._v(" "),a("li",[t._v("State Locking："),a("code",[t._v("DynamoDB")])]),t._v(" "),a("li",[t._v("IAM User 權限 (AdministratorAccess)")])]),t._v(" "),a("p",[t._v("既然是佈署 AWS 選的就是 S3 Backend，然而我不建議把 Backend 由 Terraform 納管，避免 Terraform 誤刪 S3 bucket。")]),t._v(" "),a("h2",{attrs:{id:"state-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state-storage","aria-hidden":"true"}},[t._v("#")]),t._v(" State Storage")]),t._v(" "),a("p",[t._v("建立 S3 bucket 要注意幾點功能建議開啟")]),t._v(" "),a("ul",[a("li",[t._v("Versioning")]),t._v(" "),a("li",[t._v("Object-level logging")])]),t._v(" "),a("blockquote",[a("p",[t._v("命名規則必須不重複，也可以拿 Account-ID 來做為 Bucket name (ex. terraform-ap-northeast-1-0123456789)")])]),t._v(" "),a("h2",{attrs:{id:"state-locking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state-locking","aria-hidden":"true"}},[t._v("#")]),t._v(" State Locking")]),t._v(" "),a("p",[t._v("S3 Backend 的 Locking 採用 DynamoDB，")]),t._v(" "),a("ul",[a("li",[t._v("Primary key：LockID")]),t._v(" "),a("li",[t._v("Type：String")]),t._v(" "),a("li",[t._v("Capacity reads：1")]),t._v(" "),a("li",[t._v("Capacity writes：1")])]),t._v(" "),a("blockquote",[a("p",[t._v("Capacity 設為最低消費 1 就好，同時僅有 1 個執行 terraform。")])])])},[],!1,null,null,null);e.default=i.exports}}]);