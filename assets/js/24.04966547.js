(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{209:function(t,r,e){"use strict";e.r(r);var a=e(0),s=Object(a.a)({},function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"不能在-count-內計算數值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#不能在-count-內計算數值","aria-hidden":"true"}},[t._v("#")]),t._v(" 不能在 count 內計算數值")]),t._v(" "),e("h2",{attrs:{id:"使用情境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用情境","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用情境")]),t._v(" "),e("p",[t._v("count 只能計算已知的數值，對於不存在的數值會有問題，當 apply count 有數值時可以正常運作，而 destroy count 為 0 時就會 fail。")]),t._v(" "),e("h2",{attrs:{id:"範例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#範例","aria-hidden":"true"}},[t._v("#")]),t._v(" 範例")]),t._v(" "),e("ul",[e("li",[t._v("main.tf")])]),t._v(" "),e("div",{staticClass:"language-terraform extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('resource "aws_security_group_rule" "ingress_with_source_security_group_id" {\n  count = "${length(var.web_ingress_source_security_group_id)}"\n}\n')])])]),e("ul",[e("li",[t._v("main.auto.tfvars")])]),t._v(" "),e("div",{staticClass:"language-terraform extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('web_ingress_source_security_group_id = [\n  {\n    rule                     = "http-80-tcp"\n    source_security_group_id = "${var.alb_sg_id}"\n  },\n  {\n    rule                     = "https-443-tcp"\n    source_security_group_id = "${var.alb_sg_id}"\n  }\n]\n')])])]),e("h2",{attrs:{id:"問題"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#問題","aria-hidden":"true"}},[t._v("#")]),t._v(" 問題")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("aws_security_group_rule.ingress_with_source_security_group_id: value of ‘count’ cannot be computed\n")])])]),e("h2",{attrs:{id:"參考資料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#參考資料","aria-hidden":"true"}},[t._v("#")]),t._v(" 參考資料")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/hashicorp/terraform/issues/12570",target:"_blank",rel:"noopener noreferrer"}},[t._v("terraform modules value of count cannot be computed #12570"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://shazi.info/terraform-%E8%8C%B6%E5%8C%85%E3%80%8Cvalue-of-count-cannot-be-computed%E3%80%8D%E8%A7%A3%E6%B3%95/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Terraform 茶包「value of count cannot be computed」解法"),e("OutboundLink")],1)])])])},[],!1,null,null,null);r.default=s.exports}}]);