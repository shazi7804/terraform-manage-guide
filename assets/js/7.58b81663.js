(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{208:function(a,t,r){"use strict";r.r(t);var e=r(0),s=Object(e.a)({},function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h1",{attrs:{id:"第一個-ec2-instance"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#第一個-ec2-instance","aria-hidden":"true"}},[a._v("#")]),a._v(" 第一個 EC2 Instance")]),a._v(" "),r("h2",{attrs:{id:"實作資源"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#實作資源","aria-hidden":"true"}},[a._v("#")]),a._v(" 實作資源")]),a._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.terraform.io/docs/providers/aws/d/ami.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("data aws_ami"),r("OutboundLink")],1)]),a._v(" "),r("li",[r("a",{attrs:{href:"https://www.terraform.io/docs/providers/aws/r/instance.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("resource aws_instance"),r("OutboundLink")],1)])]),a._v(" "),r("h2",{attrs:{id:"實作目標"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#實作目標","aria-hidden":"true"}},[a._v("#")]),a._v(" 實作目標")]),a._v(" "),r("ol",[r("li",[a._v("使用 data 搜尋到 Ubuntu 18.04 的 AMI-ID")]),a._v(" "),r("li",[a._v("建立 Ubuntu 18.04 的 EC2 instance")])]),a._v(" "),r("h2",{attrs:{id:"lab-start"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#lab-start","aria-hidden":"true"}},[a._v("#")]),a._v(" LAB Start")]),a._v(" "),r("ul",[r("li",[r("strong",[a._v("main.tf")]),a._v(" 定義主要性資源")])]),a._v(" "),r("div",{staticClass:"language-terraform extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v('provider "aws" {\n  region = "us-west-2"\n}\n\ndata "aws_ami" "ubuntu" {\n  most_recent = true\n\n  filter {\n    name   = "name"\n    values = ["ubuntu/images/hvm-ssd/ubuntu-bionic-18.04-amd64-server-*"]\n  }\n\n  filter {\n    name   = "virtualization-type"\n    values = ["hvm"]\n  }\n\n  owners = ["099720109477"] # Canonical\n}\n')])])]),r("ul",[r("li",[r("strong",[a._v("ec2.tf")]),a._v(" 定義 ec2 instance")])]),a._v(" "),r("div",{staticClass:"language-terraform extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v('resource "aws_instance" "web" {\n  ami           = "${data.aws_ami.ubuntu.id}"\n  instance_type = "t3.nano"\n\n  tags = {\n    Name = "terraform-101-first-ec2"\n  }\n}\n')])])]),r("p",[a._v("執行 terraform 佈署")]),a._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ terraform init\n$ terraform plan -out"),r("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("terraform-101-workshop\n$ terraform apply terraform-101-workshop\n")])])]),r("h2",{attrs:{id:"驗證"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#驗證","aria-hidden":"true"}},[a._v("#")]),a._v(" 驗證")]),a._v(" "),r("ul",[r("li",[a._v("建立一台以 "),r("code",[a._v("Ubuntu 18.04")]),a._v(" 的 EC2 instance")]),a._v(" "),r("li",[a._v("EC2 instance type 為 "),r("code",[a._v("t3.nano")])]),a._v(" "),r("li",[a._v("EC2 tag 為 "),r("code",[a._v('Key:"Name"')]),a._v(", "),r("code",[a._v('Value:"terraform-101-first-ec2"')])])]),a._v(" "),r("h2",{attrs:{id:"清場"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#清場","aria-hidden":"true"}},[a._v("#")]),a._v(" 清場")]),a._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("$ terraform destroy\n")])])]),r("ul",[r("li",[a._v("確認 EC2 刪除。")])])])},[],!1,null,null,null);t.default=s.exports}}]);